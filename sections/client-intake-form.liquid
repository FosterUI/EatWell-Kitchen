{{ 'section-contact-form.css' | asset_url | stylesheet_tag }}

<!-- sections/client-intake-form.liquid -->
<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="contact page-width page-width--narrow">
    <h1 class="title title-wrapper--no-top-margin">{{ page.title }}</h1>

    {%- form 'contact', id: 'ClientIntakeForm', class: 'isolate' -%}
      {%- if form.posted_successfully? -%}
        <h2 class="form-status form-status-list form__message" tabindex="-1" autofocus>
          {% render 'icon-success' %}
          {{ 'templates.contact.form.post_success' | t }}
        </h2>
      {%- elsif form.errors -%}
        <div class="form__message">
          <h2 class="form-status caption-large text-body" role="alert" tabindex="-1" autofocus>
            {% render 'icon-error' %}
            {{ 'templates.contact.form.error_heading' | t }}
          </h2>
        </div>
      {%- endif -%}

      <div class="contact__fields">
        <div class="field">
          <input
            class="field__input"
            type="text" 
            id="ClientName"
            name="contact[name]"
            value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
            placeholder="Full Name"
            required
          >
          <label class="field__label" for="ClientName">Full Name</label>
        </div>

        <div class="field field--with-error">
          <input
            type="email"
            id="ClientEmail"
            class="field__input"
            name="contact[email]"
            value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
            spellcheck="false"
            autocapitalize="off"
            required
            aria-required="true"
            placeholder="Email Address"
          >
          <label class="field__label" for="ClientEmail">Email Address</label>
        </div>

        <div class="field">
          <input
            type="tel"
            id="ClientPhone"
            class="field__input"
            name="contact[phone]"
            value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}"
            pattern="[0-9\-]*"
            placeholder="Phone Number"
          >
          <label class="field__label" for="ClientPhone">Phone Number</label>
        </div>

        <div class="field">
          <textarea
            rows="5"
            id="ProjectDetails"
            class="text-area field__input"
            name="contact[project_details]"
            placeholder="Tell us about your project"
          >{{- form.body -}}</textarea>
          <label class="field__label" for="ProjectDetails">Project Details</label>
        </div>

        <div class="field">
          <select class="field__input select" id="ProjectBudget" name="contact[budget]" required>
            <option value="">Select Budget Range</option>
            <option value="1000-5000">$1,000 - $5,000</option>
            <option value="5000-10000">$5,000 - $10,000</option>
            <option value="10000-plus">$10,000+</option>
          </select>
          <label class="field__label" for="ProjectBudget">Project Budget</label>
        </div>

        <div class="field">
          <input
            type="date"
            id="ProjectTimeline"
            class="field__input"
            name="contact[timeline]"
            required
          >
          <label class="field__label" for="ProjectTimeline">Desired Completion Date</label>
        </div>
      </div>

      <div class="contact__button">
        <button 
          type="submit" 
          class="button"
          {% if form.posted_successfully? %}disabled{% endif %}
          aria-label="Submit client intake form"
        >
          <span class="button__text">Submit Intake Form</span>
          <span class="button__loader" hidden>
            {% render 'icon-loading' %}
          </span>
        </button>
      </div>
    {%- endform -%}
  </div>
</div>

{% schema %}
{
  "name": "Client Intake Form",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    }
  ]
}
{% endschema %}